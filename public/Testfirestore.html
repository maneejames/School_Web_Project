<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
            import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-auth.js";
            import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-database.js";

            const firebaseConfig = {
                apiKey: "AIzaSyAIwzxvlLd9UTZXC_qc3fqZ9Qarifhjzcs",
                authDomain: "school-openhouse.firebaseapp.com",
                projectId: "school-openhouse",
                storageBucket: "school-openhouse.appspot.com",
                messagingSenderId: "321971868041",
                appId: "1:321971868041:web:66ddb25a464ab8ea11d158"
            };

            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const database = getDatabase(app);

            const signupForm = document.getElementById('signup-form');
            const loginForm = document.getElementById('login-form');

            signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const classroom = document.getElementById('classroom').value;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password, classroom);
                const user = userCredential.user;

                // Store user data in Firebase Realtime Database
                const userData = {
                    email: user.email,
                    classroom: classroom,
                    // Add other user data as needed
                };
                const userRef = ref(database, 'users/' + user.uid);
                await set(userRef, userData);

                alert('User registration successful');

                // Redirect to another page after successful sign-up
                window.location.href = 'login-already.html';
            } catch (error) {
                alert('User registration failed. ' + error.message);
            }
            });

            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;

                try {
                    await signInWithEmailAndPassword(auth, email, password);
                    alert('User login successful');

                    // Redirect to another page after successful login
                    window.location.href = 'login-already.html';
                } catch (error) {
                    alert('User login failed. ' + error.message);
                }
            });
        </script>
    </head>
    <body>
        <!-- Your HTML content here -->

        <h2>Sign Up</h2>
        <form id="signup-form">
            <input type="email" id="signup-email" placeholder="Email" required>
            <input type="password" id="signup-password" placeholder="Password" required>
            <input type="text" id="classroom" placeholder="Classroom" required>
            <button type="submit">Sign Up</button>
        </form>

        <h2>Login</h2>
        <form id="login-form">
            <input type="email" id="login-email" placeholder="Email" required>
            <input type="password" id="login-password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
    </body>
    </html>

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        
    </body>
</html>